# DevCaddy Configuration
# Copy this file to .env and fill in your values

# Enable/disable DevCaddy (optional, defaults to true in development)
VITE_DEVCADDY_ENABLED=true

# DevCaddy Supabase Configuration (required)
# Get your credentials from: https://supabase.com/dashboard/project/_/settings/api
VITE_DEVCADDY_SUPABASE_URL=https://your-project.supabase.co
VITE_DEVCADDY_SUPABASE_ANON_KEY=your-anon-key-here

# Authentication Setup:
# See ../../docs/ROLE_ASSIGNMENT.md for comprehensive setup guide
#
# Quick Start for Team Leads:
# 1. Enable Supabase Auth in your project settings
# 2. Configure email provider (Supabase default or custom SMTP)
# 3. Run migrations from packages/migrations/ folder
# 4. Create ALL team members in Supabase Dashboard (Authentication > Users > Invite User)
# 5. Assign 'developer' role to team members who need full access (see below)
# 6. Share app URL with team
#
# Assigning Developer Role (Before Users Authenticate):
# This ensures users get correct permissions immediately on first login
#
# IMPORTANT: Must use SQL Editor (Dashboard has no UI for app_metadata)
#
#   Steps:
#   1. Open Supabase Dashboard > SQL Editor > New query
#   2. Run this SQL to assign developer role:
#
#      UPDATE auth.users
#      SET raw_app_meta_data = raw_app_meta_data || '{"role": "developer"}'::jsonb
#      WHERE email IN ('dev1@company.com', 'dev2@company.com');
#
#   3. Verify with:
#
#      SELECT email, raw_app_meta_data FROM auth.users;
#
# SECURITY NOTE:
# - raw_app_meta_data can ONLY be edited via SQL (service role)
# - This is intentional - prevents users from giving themselves developer access
# - Never use raw_user_meta_data for permissions (user-editable, insecure)
#
# User Experience:
# - User opens app and clicks DevCaddy toggle
# - Enters their email → Receives magic link
# - Clicks magic link → Authenticated with correct permissions!
# - Session persists (users only enter email ONCE)
#
# Permission Levels:
# - Developers (with role='developer'): Can view/edit/delete ALL annotations
# - Clients (no role set): Can view ALL but only edit/delete their OWN annotations
